# 11월 27일 코드 리뷰 면접 내용

> ### 코드 리뷰 면접 후기
> 아직 대단할 거 없는 신입 개발자이지만 팀원들의 코드를 직접 리뷰하는 것 말고는 누가 내 코드를 봐준적이 없었습니다. </br>
> AI 한테 평가를 맡겨도 잘 했다 하지, 핵심을 찾아내는 건 사람의 영역이라는 다시 한 번 느끼는 계기가 되었습니다. </br>
> 내 코드를 리뷰하며, 질문에 답변하다보니 부족한 점을 많이 느낄 수 있었고, 그 과정을 기록하기 위해 이 글을 남깁니다.

## 질문 + 나의 답변 + 모범 답안

1. HttpServletRequest request 에는 무엇이 있는가?
    - 나의 답변
      - jwt 토큰, 사용자의 ip 주소, 사용자가 보내는 데이터 request body 같은 것들이... 들어있습니다.
    - 모범 답안
      - http 헤더가 들어있습니다.


2. @Component 어노테이션은 무엇인지 아느냐?

   - 나의 답변
       - Spring 에서 bean을 등록해줄 때 사용하는 어노테이션 입니다. new로 객체를 생성하는 대신에 미리 해당 객체를 만들어두고 재사용하기 위해 사용됩니다.


3. @Component 쓰는거랑 new를 쓰는거의 차이를 아느냐?
    - 나의 답변
      - new를 사용하게되면 사용자 요청이 들어올 때마다 새로운 객체를 만들어 실행되지만, bean으로 등록한 객체를 이용하게되면 해당 객체를 각 요청에서 재사용하고 멀티스레드에서 실행시켜준다고 알고있습니다.


3. 토큰이 유효한지 어떻게 체크하는지 알고있느냐?
    - jwt 토큰 비밀키를 이용해 사용자를 검증하고 있습니다. 그리고 access 토큰과 refresh 토큰을 이용해 사용자 인증을 확인합니다. (이건 면접관의 질문 의도와 다른 답이었다고 함. 어떤 코드에서 어떻게 체크하는지를 아는지 물어본 것이었음)


4. 토큰 유효시간은 어떻게 설정했느냐?
    - private.properties 파일에서 access토큰은 1시간, refresh 토큰은 1주일로 설정해뒀습니다.


5. 에세스 토큰은 왜 1시간으로 설정했느냐, 리프레시 토큰은 왜 1주일로 했느냐?
    - 지문과 문항을 생성하는데 사용자가 잠시 자리를 비울 수도 있어, 사용자 경험을 향상시키기 위해 1시간정도로 잡았습니다.
    - refresh 토큰은 보안상 1주일로 설정해뒀습니다.
      - 아쉬운점: 이렇게 말할 수 있었는데..


6. 리프레시 토큰이 1주일이면 안전한거냐? 1주일로 설정한 근거가 무엇이냐
   - 너무 짧으면 사용자경험이 떨어질 수 있고, 너무 길면 그래도 해킹 위험에 더 장시간 노출될 수 있어서..
     - 아쉬운점: 개선방향을 제시하면 좋았을 텐데.. 예를 들면 refresh token은 ip도 함께 저장을 해두거나, refresh 토큰도 자주 갱신을 해주면 된다라는식으로?


7. @AuthenticationPrincipal 이건 왜 api endpoint마다 입력해서 사용하느냐
    - db에 데이터를 저장할 때 실제 사용자임을 확인하기 위해 넣었습니다.


8. 굳이 필요 없어 보이는데 넣어둔 이유가 뭐냐, 어짜피 로그인 인증 받는데 굳이 이게 있을필요가 있느냐
    - 아무리 인증을 받았다고 하더라도.. 비즈니스 로직에서도 확인이 필요하지 않을까요...?
      - 아쉬운점: 지금 생각해보니 id도 들어오는데 굳이 db 조회를 다시할 필요가 있나 싶다.


9. 데이터 생성에 post 요청을 사용한 이유가 무엇이냐
    - get으로도 요청을 보내는게 가능하긴 하지만, 데이터 생성에 있어서 긴 데이터를 저장하는 경우에 body에 데이터를 담아서 보내주기 위해서 사용했습니다.
    - 그리고 보안상 get보다는 post가 유리한 조건을 가지고 있다고 알고 있어 그렇게 저장했습니다.
      - 아쉬운점: post와 get 방식의 캐싱 방식에 대해서 좀 더 자세히 알아두지 못한 점..


10. 200, 400, 500 의 의미를 아느냐
    - 200은 성공을 의미합니다. 500 에러 코드는 보통 서버상의 오류가 발생했을 때 사용하는 코드이고, 400은 요청 데이터의 파라미터가 불일치 할 때 읃답하는 상태 코드입니다.
      - 아쉬운점: 오우.. 면접 끝나고 나서도 생각하지 못한 부분인데, passage controller 에서 사용하는 응답코드 기준이... 모호하긴 했네..